<Window x:Class="Testing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Konfigurator" Height="900" Width="1400"
        Background="#F1F5F9">
    <Window.Resources>
        <Style x:Key="CardBorderStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="18"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="16" ShadowDepth="0" Opacity="0.15"/>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#0F172A"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>
        <Style x:Key="AccentButton" TargetType="Button">
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="MinWidth" Value="130"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="8,4"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#CBD5F5"/>
                                <Setter Property="Foreground" Value="#64748B"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1D4ED8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource AccentButton}">
            <Setter Property="Background" Value="#0F172A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Setter Property="MinWidth" Value="120"/>
        </Style>
        <Style TargetType="TabItem">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="16,10"/>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="#F8FAFC"/>
        </Style>
    </Window.Resources>

    <Grid Margin="24" RowSpacing="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Style="{StaticResource CardBorderStyle}" Background="#1D4ED8" Padding="24" CornerRadius="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Store Konfigurator" FontSize="28" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Verwalten Sie vorhandene Systeme oder erstellen Sie neue Konfigurationen in einem modernen Layout." Foreground="#E2E8F0" Margin="0,6,0,0"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Spacing="12">
                    <Button x:Name="btnStartNew" Content="Neue Konfiguration" Style="{StaticResource AccentButton}" Click="StartNewConfiguration_Click"/>
                    <Button x:Name="btnApplyRanges" Content="Fächer aktualisieren" Style="{StaticResource SecondaryButton}" Click="ApplyRanges_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1" ColumnSpacing="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="2.8*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" VerticalAlignment="Stretch" Spacing="20">
                <Border Style="{StaticResource CardBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Vorhandene Systeme" Style="{StaticResource SectionTitle}"/>
                        <TextBlock Text="Konfigurationen werden beim Start automatisch geladen. Wählen Sie einen Eintrag aus, um ihn zu laden oder zu löschen." Foreground="#475569" Margin="0,0,0,16" TextWrapping="Wrap"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Margin="0,0,0,12" Spacing="8">
                            <Button x:Name="btnRefreshConfigs" Content="Liste aktualisieren" Style="{StaticResource SecondaryButton}" Click="RefreshConfigurations_Click"/>
                        </StackPanel>
                        <ListView x:Name="existingConfigsList" Height="360" SelectionMode="Single" SelectionChanged="ExistingConfigsList_SelectionChanged">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="#E2E8F0" BorderThickness="1" CornerRadius="8" Padding="10" Margin="0,0,0,8" Background="#F8FAFC">
                                        <StackPanel>
                                            <TextBlock Text="{Binding StoreName}" FontWeight="Bold" FontSize="16" Foreground="#0F172A"/>
                                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0" Spacing="12">
                                                <TextBlock Text="ID:" FontWeight="SemiBold" Foreground="#475569"/>
                                                <TextBlock Text="{Binding StoreId}" Foreground="#475569"/>
                                                <TextBlock Text="Typ:" FontWeight="SemiBold" Foreground="#475569"/>
                                                <TextBlock Text="{Binding Type}" Foreground="#475569"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,2,0,0" Spacing="12">
                                                <TextBlock Text="PosX:" FontWeight="SemiBold" Foreground="#475569"/>
                                                <TextBlock Text="{Binding PosX}" Foreground="#475569"/>
                                                <TextBlock Text="PosY:" FontWeight="SemiBold" Foreground="#475569"/>
                                                <TextBlock Text="{Binding PosY}" Foreground="#475569"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0" Spacing="10">
                            <Button x:Name="btnLoadSelected" Content="Auswahl laden" Style="{StaticResource AccentButton}" Click="LoadConfiguration_Click" IsEnabled="False"/>
                            <Button x:Name="btnDeleteSelected" Content="Auswahl löschen" Style="{StaticResource SecondaryButton}" Click="DeleteSelectedConfiguration_Click" IsEnabled="False"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Aktiver Arbeitsmodus" Style="{StaticResource SectionTitle}"/>
                        <TextBlock x:Name="activeConfigurationText" Text="Neue Konfiguration" FontSize="16" FontWeight="SemiBold" Foreground="#1D4ED8"/>
                        <TextBlock x:Name="activeConfigurationDetails" Text="Es wurden noch keine bestehenden Systeme geladen." Margin="0,8,0,0" TextWrapping="Wrap" Foreground="#475569"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <Border Grid.Column="1" Style="{StaticResource CardBorderStyle}">
                <Grid RowSpacing="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Spacing="12">
                        <TextBlock Text="Bereit zum Speichern" VerticalAlignment="Center" Foreground="#475569"/>
                        <Button Content="Konfiguration speichern" Style="{StaticResource AccentButton}" Click="Add_Click"/>
                    </StackPanel>

                    <TabControl x:Name="MainTabControl" Grid.Row="1">
                        <TabItem Header="Locker">
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="3*"/>
                                </Grid.ColumnDefinitions>

                                <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                                    <StackPanel Margin="0" Spacing="16">
                                        <GroupBox Header="Schrankeinstellungen">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                                    <TextBlock Text="Schrankvariante" Width="140" VerticalAlignment="Center"/>
                                                    <ComboBox x:Name="comboSchrankvariante" Width="120" SelectionChanged="lockerArt_Change"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,5" Spacing="5">
                                                    <TextBlock Text="Anzahl Türen" Width="140"/>
                                                    <TextBox x:Name="schacht1" Width="40"/>
                                                    <TextBox x:Name="schacht2" Width="40"/>
                                                    <TextBox x:Name="schacht3" Width="40"/>
                                                    <TextBox x:Name="schacht4" Width="40"/>
                                                </StackPanel>
                                                <Button Content="Schrank erstellen" Margin="0,10,0,0" Style="{StaticResource AccentButton}" Click="ErzeugeMatrix"/>
                                            </StackPanel>
                                        </GroupBox>

                                        <GroupBox Header="Boards verwalten">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,5">
                                                    <TextBlock Text="Router IF" Width="80"/>
                                                    <TextBox x:Name="txtRouterIF" Width="140"/>
                                                    <Button Content="Hinzufügen" Margin="10,0,0,0" Width="100" Click="add_Board"/>
                                                </StackPanel>
                                                <ListBox x:Name="listBoards" Height="80" SelectionMode="Extended" Margin="0,5">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <StackPanel Orientation="Horizontal" Margin="2">
                                                                <Rectangle Width="16" Height="16" Fill="{Binding Farbe}" Stroke="Black" StrokeThickness="0.5" Margin="0,0,5,0"/>
                                                                <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                                            </StackPanel>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                                <StackPanel Orientation="Horizontal" Spacing="10">
                                                    <Button Content="Entfernen" Width="110" Click="remove_Board"/>
                                                    <Button Content="Zuweisen" Width="110" Click="zuweisen_Board"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </GroupBox>

                                        <GroupBox Header="Ausgewählte Türen">
                                            <ListBox x:Name="listAusgewaehlteButtons" Height="70" SelectionMode="Extended"/>
                                        </GroupBox>

                                        <GroupBox Header="Größe der Türen">
                                            <StackPanel Orientation="Horizontal" Margin="0,5" Spacing="8">
                                                <TextBlock Text="Größe" Width="80"/>
                                                <ComboBox x:Name="schachtSize" IsEditable="True" Width="120" SelectionChanged="RangeSelectionChanged"/>
                                                <Button Content="Zuweisen" Width="100" Click="zuweisen_Size"/>
                                            </StackPanel>
                                        </GroupBox>

                                        <GroupBox Header="Position">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,2" Spacing="8">
                                                    <Label Content="PosX" Width="60" VerticalAlignment="Center"/>
                                                    <TextBox x:Name="positionX2" Width="70" TextAlignment="Center" VerticalContentAlignment="Center"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,2" Spacing="8">
                                                    <Label Content="PosY" Width="60" VerticalAlignment="Center"/>
                                                    <TextBox x:Name="positionY2" Width="70" TextAlignment="Center" VerticalContentAlignment="Center"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </GroupBox>

                                        <GroupBox Header="Konfiguration speichern">
                                            <StackPanel Orientation="Horizontal" Margin="0,5" Spacing="10">
                                                <Button Content="Alten Schrank einfügen" Width="150" Click="OldLocker_to_DB"/>
                                                <Button Content="Neuen Schrank einfügen" Width="160" Click="Locker_to_DB"/>
                                            </StackPanel>
                                        </GroupBox>
                                    </StackPanel>
                                </ScrollViewer>

                                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                                    <Grid>
                                        <Canvas x:Name="selectionCanvas" Background="Transparent">
                                            <Grid x:Name="matrixGrid" Margin="0,30"/>
                                            <Rectangle x:Name="selectionRectangle" Stroke="Blue" StrokeThickness="1" Fill="#400088FF" Visibility="Collapsed"/>
                                        </Canvas>
                                    </Grid>
                                </ScrollViewer>
                            </Grid>
                        </TabItem>

                        <TabItem Header="Karussell">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid Margin="10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="3*"/>
                                        <ColumnDefinition Width="2*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Spacing="12">
                                        <StackPanel Margin="0,0,0,10">
                                            <Label Content="Modell auswählen:"/>
                                            <ComboBox x:Name="comboModel" Width="220" SelectionChanged="comboModel_SelectionChanged"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panel" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Ebene von:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxVon" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="bis:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxBis" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="Size:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxSize" Width="90" SelectionChanged="RangeSelectionChanged"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panel2" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Ebene von:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxVon2" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="bis:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxBis2" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="Size:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxSize2" Width="90" SelectionChanged="RangeSelectionChanged"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panel3" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Ebene von:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxVon3" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="bis:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxBis3" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="Size:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxSize3" Width="90" SelectionChanged="RangeSelectionChanged"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panel4" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Ebene von:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxVon4" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="bis:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxBis4" Width="60" SelectionChanged="boxVonBis_Changed"/>
                                            <Label Content="Size:" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="comboBoxSize4" Width="90" SelectionChanged="RangeSelectionChanged"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panel21" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Anzahl an Schubladen" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="anzahlSchubladen" Width="60"/>
                                            <Button Content="in DB einfügen" Width="120" Click="Duo_to_DB"/>
                                        </StackPanel>

                                        <StackPanel x:Name="panelSimpli" Orientation="Horizontal" Margin="0,0,0,10" Visibility="Collapsed" Spacing="8">
                                            <Label Content="Art" VerticalAlignment="Center"/>
                                            <ComboBox x:Name="artSimpli" Width="70"/>
                                            <Button Content="in DB einfügen" Width="120" Click="simpli_to_Db"/>
                                        </StackPanel>

                                        <TextBlock x:Name="panel5" Text="⚠️ Ebenen sind falsch eingetragen" Foreground="DarkOrange" Visibility="Hidden" Margin="0,10,0,0"/>

                                        <StackPanel x:Name="panelAddress" Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center" HorizontalAlignment="Left" Spacing="10">
                                            <Label Content="AddressData" VerticalAlignment="Center"/>
                                            <TextBox x:Name="addressData" Width="120" TextAlignment="Center" VerticalContentAlignment="Center"/>
                                            <Label Content="PosX" VerticalAlignment="Center"/>
                                            <TextBox x:Name="positionX" Width="80" TextAlignment="Center" VerticalContentAlignment="Center"/>
                                            <Label Content="PosY" VerticalAlignment="Center"/>
                                            <TextBox x:Name="positionY" Width="80" TextAlignment="Center" VerticalContentAlignment="Center"/>
                                        </StackPanel>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                        <Label Content="Konfiguration:" FontWeight="Bold"/>
                                        <ListBox x:Name="listBoxAdd" Height="320" Margin="0,5"/>
                                        <Button Content="In DB einfügen" Click="Add_Click" Width="140" Margin="0,12,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>

                        <TabItem Header="Einstellungen">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid Margin="10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="5*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="2*"/>
                                        <RowDefinition Height="2*"/>
                                        <RowDefinition Height="2*"/>
                                        <RowDefinition Height="15*"/>
                                    </Grid.RowDefinitions>

                                    <Label Grid.Column="1" Grid.Row="1" Content="SQL Instanz" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="2" Grid.Row="1" x:Name="txtSQLinstance" Width="320" Margin="10" TextAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Left"/>

                                    <Label Grid.Column="1" Grid.Row="2" Content="SQL User" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="2" Grid.Row="2" x:Name="txtSQLuser" Width="320" Margin="10" TextAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Left"/>

                                    <Label Grid.Column="1" Grid.Row="3" Content="SQL Password" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="2" Grid.Row="3" x:Name="txtSQLpassword" Width="320" Margin="10" TextAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Left"/>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
